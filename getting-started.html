---
layout   : default
title    : Getting Started
category : Introduction
order    : 0
---
<section>
	<h3>The basics</h3>

	<p>One of the <a href="index.html">principal goals of PHP Merchant</a> is to minimize the time you have to spend to learn the way around a payment gateway. We abstract all the ugly details and leave you with a consistent and simple interface that you can use to deal with multiple gateways at once.</p>

	<p>First thing you need to do is to plan which payment gateway you're going to use with your project. We have a handy <a href="supported-gateways.html">payment gateway feature matrix</a> that could help you choose the best suited payment gateway to use. These payment gateways often require a special API credential to use their service (API username, password, secret key etc.), so you need to make sure you have this as well.</p>

	<p>Then, you can start <a href="installation.php">downloading and putting PHP Merchant in your project</a>. The most important file that you have to include every time you use PHP Merchant is <code>php-merchant.php</code>. Also, depending on the payment gateways you're planning to use, you also need to include those individual classes as well. Example:</p>

{% highlight php linenos startinline %}
// Assuming you're using Paypal Express Checkout and Paypal Pro, and
// PHP Merchant is put inside a sub-directory called php-merchant.
require_once( 'php-merchant/common/php-merchant.php' );
require_once( 'php-merchant/gateways/paypal-express-checkout.php' );
require_once( 'php-merchant/gateways/paypal-pro.php' );
{% endhighlight %}

</section>

<section>
	<h3>Making a payment</h3>

	<p>To make a payment, first you'll need to create an instance of the payment gateway class. For instance, to create a Paypal Express Checkout instance:</p>

{% highlight php linenos startinline %}
$paypal_express = new PHP_Merchant_Paypal_Express_Checkout();
{% endhighlight %}

	<p>You can also pass into the constructor an array containing API information as well:</p>
{% highlight php linenos startinline %}
$api_info = array(
    'return_url'        => 'http://example.com/return',
    'cancel_url'        => 'http://example.com/cancel',
    'address_override'  => true,
    'api_username'      => 'sdk-three_api1.sdk.com',
    'api_password'      => 'QFZCWN5HZM8VBG7Q',
    'api_signature'     => 'A-IzJhZZjhg29XQ2qnhapuwxIDzyAZQ92FRP5dqBzVesOkzbdUONzmOU',
);
$paypal_express = new PHP_Merchant_Paypal_Express_Checkout( $api_info );
{% endhighlight %}

	<p>To make an actual payment using the payment gateway instance, you can use the <code>purchase</code> method. You need to pass into this method an array containing the information regarding the purchase:</p>

{% highlight php linenos startinline %}
$payment_options = array(
    // Shipping details
    'shipping_address' => array(
        'name'    => 'Gary Cao',
        'street'  => '1 Infinite Loop',
        'street2' => 'Apple Headquarter',
        'city'    => 'Cupertino',
        'state'   => 'CA',
        'country' => 'USA',
        'zip'     => '95014',
        'phone'   => '(877) 412-7753',
    ),

    // Payment info
    'token'       => 'EC-2JJ0893331633543K',
    'payer_id'    => 'BC798KQ2QU22W',
    'currency'    => 'JPY',
    'amount'      => 15337,
    'subtotal'    => 13700,
    'shipping'    => 1500,
    'tax'         => 137,
    'description' => 'Order for example.com',
    'invoice'     => 'E84A90G94',
    'notify_url'  => 'http://example.com/ipn',

    // Items
    'items' => array(
        array(
            'name'        => 'Gold Cart Plugin',
            'description' => 'Gold Cart extends your WP e-Commerce store by enabling additional features and functionality, including views, galleries, store search and payment gateways.',
            'amount'      => 4000,
            'quantity'    => 1,
            'tax'         => 40,
            'url'         => 'http://getshopped.org/extend/premium-upgrades/premium-upgrades/gold-cart-plugin/',
        ),
        array(
            'name'        => 'Member Access Plugin',
            'description' => 'Create pay to view subscription sites',
            'amount'      => 5000,
            'quantity'    => 1,
            'tax'         => 50,
            'url'         => 'http://getshopped.org/extend/premium-upgrades/premium-upgrades/member-access-plugin/',
        ),
        array(
            'name'        => 'Amazon S3',
            'description' => 'This Plugin allows downloadable products that you have for sale on your WP e-Commerce site to be hosted within Amazon S3.',
            'amount'      => 4700,
            'quantity'    => 1,
            'tax'         => 47,
            'url'         => 'http://getshopped.org/extend/premium-upgrades/premium-upgrades/amazon-s3-plugin/',
        ),
    ),
);

$response = $paypal_express->purchase( $payment_options );
{% endhighlight %}

<p>The return value of <code>purchase()</code> will be a <code>PHP_Merchant_Response</code> object. To check whether the payment succeeds or not:</code></p>

{% highlight php linenos startinline %}
if ( $response->is_successful() ) {
	// if successful, then do something on your back end
	$my_app->process( $response->get( 'transaction_id' ) );
} else {
	// if failed, output the errors
	$my_app->display( $response->get_errors() );
}
{% endhighlight %}
</section>

<section>
	<h3>Resources</h3>
	<p>This is a very brief and superficial introduction to how you use PHP Merchant. The sample code is also simplified, but the concept is there. If you want to use another gateway, simply replace <code>new PHP_Merchant_Paypal_Express_Checkout()</code> with the proper class name. Also some gateways require different API parameters. It's highly recommended that you read the corresponding resources for detailed information.</p>
	<ul>
		<li><a href="supported-gateways.html">Individual gateway documentation and supported feature matrix.</a></li>
		<li><a href="base-class.html">Payment Gateway Base Class</a></li>
		<li><a href="response.html">Processing Response</a></li>
	</ul>
</section>